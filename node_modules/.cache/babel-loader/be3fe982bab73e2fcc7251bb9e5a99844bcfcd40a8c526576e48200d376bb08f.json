{"ast":null,"code":"var _jsxFileName = \"/Users/yum.ishii/Desktop/keiba-design-lp/src/components/SceneSlider.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from \"react\";\nimport { SceneCard } from \"./SceneCard\";\nimport { SliderArrow } from \"./SliderArrow\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport function SceneSlider({\n  scenes\n}) {\n  _s();\n  const [currentIndex, setCurrentIndex] = useState(0);\n  const [visibleCount, setVisibleCount] = useState(1);\n  const [touchStart, setTouchStart] = useState(null);\n  const [touchEnd, setTouchEnd] = useState(null);\n  const [showAttention, setShowAttention] = useState(true);\n  const sliderContentRef = useRef(null);\n\n  // 画面幅から表示枚数を計算\n  useEffect(() => {\n    const updateVisibleCount = () => {\n      if (window.innerWidth >= 1280) setVisibleCount(4);else if (window.innerWidth >= 1024) setVisibleCount(3);else if (window.innerWidth >= 640) setVisibleCount(2);else setVisibleCount(1);\n    };\n    updateVisibleCount();\n    window.addEventListener('resize', updateVisibleCount);\n    return () => window.removeEventListener('resize', updateVisibleCount);\n  }, []);\n\n  // currentIndexの最大値を制限\n  useEffect(() => {\n    const maxIndex = Math.max(0, scenes.length - visibleCount);\n    if (currentIndex > maxIndex) {\n      setCurrentIndex(maxIndex);\n    }\n  }, [visibleCount, scenes.length]);\n\n  // スワイプ機能\n  const minSwipeDistance = 50;\n  const onTouchStart = e => {\n    setTouchEnd(null);\n    setTouchStart(e.targetTouches[0].clientX);\n  };\n  const onTouchMove = e => {\n    setTouchEnd(e.targetTouches[0].clientX);\n  };\n  const onTouchEnd = () => {\n    if (!touchStart || !touchEnd) return;\n    const distance = touchStart - touchEnd;\n    const isLeftSwipe = distance > minSwipeDistance;\n    const isRightSwipe = distance < -minSwipeDistance;\n    if (isLeftSwipe && currentIndex < Math.max(0, scenes.length - visibleCount)) {\n      handleNext();\n    }\n    if (isRightSwipe && currentIndex > 0) {\n      handlePrev();\n    }\n  };\n\n  // --- スライド操作 ---\n  const handlePrev = () => {\n    if (currentIndex > 0) {\n      setCurrentIndex(currentIndex - 1);\n      setShowAttention(false);\n    }\n  };\n  const handleNext = () => {\n    const maxIndex = Math.max(0, scenes.length - visibleCount);\n    if (currentIndex < maxIndex) {\n      setCurrentIndex(currentIndex + 1);\n      setShowAttention(false);\n    }\n  };\n\n  // --- スライド位置の計算 ---\n  useEffect(() => {\n    if (sliderContentRef.current) {\n      const cardWidth = sliderContentRef.current.children[0].offsetWidth;\n      const offset = -currentIndex * cardWidth;\n      sliderContentRef.current.style.transform = `translateX(${offset}px)`;\n    }\n  }, [currentIndex, visibleCount]);\n  const maxIndex = Math.max(0, scenes.length - visibleCount);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"relative w-full max-w-7xl mx-auto px-12 md:px-16\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"overflow-hidden\",\n      onTouchStart: onTouchStart,\n      onTouchMove: onTouchMove,\n      onTouchEnd: onTouchEnd,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        ref: sliderContentRef,\n        className: \"flex transition-transform duration-500 ease-in-out\",\n        children: scenes.map(scene => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex-shrink-0 w-full sm:w-1/2 lg:w-1/3 xl:w-1/4 p-2\",\n          children: /*#__PURE__*/_jsxDEV(SceneCard, {\n            ...scene\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 15\n          }, this)\n        }, scene.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 7\n    }, this), currentIndex > 0 && /*#__PURE__*/_jsxDEV(SliderArrow, {\n      direction: \"left\",\n      onClick: handlePrev,\n      variant: \"scene\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 9\n    }, this), currentIndex < maxIndex && /*#__PURE__*/_jsxDEV(SliderArrow, {\n      direction: \"right\",\n      onClick: handleNext,\n      variant: \"scene\",\n      className: showAttention ? 'animate-attention' : ''\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 88,\n    columnNumber: 5\n  }, this);\n}\n_s(SceneSlider, \"zq8jvTrNPK3sDEnX9qzLl58zu0k=\");\n_c = SceneSlider;\nvar _c;\n$RefreshReg$(_c, \"SceneSlider\");","map":{"version":3,"names":["React","useState","useEffect","useRef","SceneCard","SliderArrow","jsxDEV","_jsxDEV","SceneSlider","scenes","_s","currentIndex","setCurrentIndex","visibleCount","setVisibleCount","touchStart","setTouchStart","touchEnd","setTouchEnd","showAttention","setShowAttention","sliderContentRef","updateVisibleCount","window","innerWidth","addEventListener","removeEventListener","maxIndex","Math","max","length","minSwipeDistance","onTouchStart","e","targetTouches","clientX","onTouchMove","onTouchEnd","distance","isLeftSwipe","isRightSwipe","handleNext","handlePrev","current","cardWidth","children","offsetWidth","offset","style","transform","className","ref","map","scene","fileName","_jsxFileName","lineNumber","columnNumber","id","direction","onClick","variant","_c","$RefreshReg$"],"sources":["/Users/yum.ishii/Desktop/keiba-design-lp/src/components/SceneSlider.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\nimport { SceneCard } from \"./SceneCard\";\nimport { SliderArrow } from \"./SliderArrow\";\n\nexport function SceneSlider({ scenes }) {\n  const [currentIndex, setCurrentIndex] = useState(0);\n  const [visibleCount, setVisibleCount] = useState(1);\n  const [touchStart, setTouchStart] = useState(null);\n  const [touchEnd, setTouchEnd] = useState(null);\n  const [showAttention, setShowAttention] = useState(true);\n  const sliderContentRef = useRef(null);\n\n  // 画面幅から表示枚数を計算\n  useEffect(() => {\n    const updateVisibleCount = () => {\n      if (window.innerWidth >= 1280) setVisibleCount(4);\n      else if (window.innerWidth >= 1024) setVisibleCount(3);\n      else if (window.innerWidth >= 640) setVisibleCount(2);\n      else setVisibleCount(1);\n    };\n    updateVisibleCount();\n    window.addEventListener('resize', updateVisibleCount);\n    return () => window.removeEventListener('resize', updateVisibleCount);\n  }, []);\n\n  // currentIndexの最大値を制限\n  useEffect(() => {\n    const maxIndex = Math.max(0, scenes.length - visibleCount);\n    if (currentIndex > maxIndex) {\n      setCurrentIndex(maxIndex);\n    }\n  }, [visibleCount, scenes.length]);\n\n  // スワイプ機能\n  const minSwipeDistance = 50;\n\n  const onTouchStart = (e) => {\n    setTouchEnd(null);\n    setTouchStart(e.targetTouches[0].clientX);\n  };\n\n  const onTouchMove = (e) => {\n    setTouchEnd(e.targetTouches[0].clientX);\n  };\n\n  const onTouchEnd = () => {\n    if (!touchStart || !touchEnd) return;\n    const distance = touchStart - touchEnd;\n    const isLeftSwipe = distance > minSwipeDistance;\n    const isRightSwipe = distance < -minSwipeDistance;\n\n    if (isLeftSwipe && currentIndex < Math.max(0, scenes.length - visibleCount)) {\n      handleNext();\n    }\n    if (isRightSwipe && currentIndex > 0) {\n      handlePrev();\n    }\n  };\n\n  // --- スライド操作 ---\n  const handlePrev = () => {\n    if (currentIndex > 0) {\n      setCurrentIndex(currentIndex - 1);\n      setShowAttention(false);\n    }\n  };\n\n  const handleNext = () => {\n    const maxIndex = Math.max(0, scenes.length - visibleCount);\n    if (currentIndex < maxIndex) {\n      setCurrentIndex(currentIndex + 1);\n      setShowAttention(false);\n    }\n  };\n\n  // --- スライド位置の計算 ---\n  useEffect(() => {\n    if (sliderContentRef.current) {\n      const cardWidth = sliderContentRef.current.children[0].offsetWidth;\n      const offset = -currentIndex * cardWidth;\n      sliderContentRef.current.style.transform = `translateX(${offset}px)`;\n    }\n  }, [currentIndex, visibleCount]);\n\n  const maxIndex = Math.max(0, scenes.length - visibleCount);\n\n  return (\n    <div className=\"relative w-full max-w-7xl mx-auto px-12 md:px-16\">\n      <div \n        className=\"overflow-hidden\"\n        onTouchStart={onTouchStart}\n        onTouchMove={onTouchMove}\n        onTouchEnd={onTouchEnd}\n      >\n        <div\n          ref={sliderContentRef}\n          className=\"flex transition-transform duration-500 ease-in-out\"\n        >\n          {scenes.map((scene) => (\n            <div key={scene.id} className=\"flex-shrink-0 w-full sm:w-1/2 lg:w-1/3 xl:w-1/4 p-2\">\n              <SceneCard {...scene} />\n            </div>\n          ))}\n        </div>\n      </div>\n      {currentIndex > 0 && (\n        <SliderArrow direction=\"left\" onClick={handlePrev} variant=\"scene\" />\n      )}\n      {currentIndex < maxIndex && (\n        <SliderArrow direction=\"right\" onClick={handleNext} variant=\"scene\" className={showAttention ? 'animate-attention' : ''} />\n      )}\n    </div>\n  );\n} "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}